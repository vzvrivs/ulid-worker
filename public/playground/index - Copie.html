<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ULID Worker Terminal – Home</title>

    <!-- 🌐 Favicon classique -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />

    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>

    <header class="ulid-navbar">
      <div class="ulid-navbar-container">
    
        <button class="burger-btn" aria-label="Menu">&#9776;</button>
    
        <nav class="ulid-nav">
          <a href="/">🧪 ULID</a>
          <a href="/music">🎶 Music</a>
          <a href="/docs">📚 Docs</a>
          <a href="/help">🆘 Aide</a>
          <a href="/matrix">🧬 Matrix</a>
          <a href="/playground">🕹️ Playground</a>
          <a href="#" onclick="toggleDarkMode(); return false;" id="themeToggle">🌓 Thème</a>
        </nav>

      </div>
    </header>    
    
    <!-- 💡 Contenu principal -->
    <div class="content">
      <main class="container main-section">
      <h1>🎛️ ULID Playground 🤠</h1>
      <p>Bienvenue sur ton labo interactif de génération et test d'ULID, propulsé par Cloudflare Worker ✨</p>
      <p>ULID est un identifiant unique universel, qui est lexicographiquement sortable et basé sur le temps. Il est souvent utilisé dans les bases de données et les systèmes distribués.</p>
      <p>Tu peux générer des ULID, vérifier leur conformité, et même remplir automatiquement des champs JSON avec des ULID. Amuse-toi bien !</p>

      <h2>🎲 Générateur ULID</h2>
      <div class="row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label for="gen-count">Nombre d'ULID :</label>
            <input id="gen-count" type="number" value="5" min="1" max="1000" style="width: 8rem;" />
            <label for="gen-prefix">Préfixe :</label>
            <input id="gen-prefix" placeholder="ex: RAPH-" />
            <label for="gen-suffix">Suffixe :</label>
            <input id="gen-suffix" placeholder="ex: -X" />
            <label for="gen-base">Base :</label>
            <select id="gen-base">
              <option value="crockford">Base32 (Crockford)</option>
              <option value="hex">Base16 (Hexa)</option>
            </select>
            <label for="gen-format">Format d’affichage :</label>
              <select id="gen-format" style="width: 100%;">
                <option value="json">JSON</option>
                <option value="csv">CSV</option>
                <option value="tsv">TSV</option>
                <option value="text">Text</option>
                <option value="joined">Joined</option>
              </select>        
          </div>
          <div style="margin: 1rem 0;">
            <label style="display: inline-flex; align-items: center; gap: 0.5rem; white-space: nowrap;">
              Inclure version binaire (bin) :
              <input type="checkbox" id="gen-bin" name="gen-bin">
            </label>
          </div>
          <div style="margin-top: 0.5rem;">
            <button id="generate-btn">Générer les ULID</button>
          </div>
        </div>
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <label for="gen-output">ULID Générés :</label>
          <pre id="gen-output" style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
              max-height: 400px;
            ">// En attente</pre>
          <div style="display: flex; align-items: center; gap: 1rem; margin-top: 0.5rem;">
            <button class="copy-btn" onclick="copyText('gen-output', event)">📋 Copier</button>
            <button id="clear-gen-output-btn">🧹 Effacer</button>
            <label for="gen-export-format" style="width: min(35%, 200px);">Exporter en :
              <select id="gen-export-format">
                <option value="json">JSON</option>
                <option value="csv">CSV</option>
                <option value="tsv">TSV</option>
                <option value="text">Text</option>
                <option value="joined">Joined</option>
              </select>
            </label>
            <button id="download-gen-btn">💾 Télécharger</button>
          </div>
        </div>
      </div> 
      <div style="margin-top: 1rem;">
        <h4>📎 Requête GET de la génération d'ULID :</h4>
        <pre id="req-gen" style="
            width: 100%;
            max-width: 100%;
            overflow-x: auto;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-word;
            box-sizing: border-box;
            max-height: 400px;
          ">// En attente</pre>
        <button class="copy-btn" onclick="copyText('req-gen', event)">📋 Copier</button>
        <button id="clear-req-gen-btn">🧹 Effacer</button>
      </div>

      <h2>🔍 Vérificateur ULID</h2>
      <div class="row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label for="check-input">ULID à vérifier :</label>
            <input id="check-input" type="text" placeholder="01JR...">
          </div>
          <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
            <button id="paste-ulid-btn">📥 Coller</button>
            <button id="clear-ulid-btn">🧼 Effacer ULID</button>
            <button id="check-btn">Vérifier l’ULID</button>
          </div>
        </div>
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <label for="check-output">Résultat de la vérification :</label>
          <pre id="check-output" style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
              max-height: 400px;
            ">// En attente</pre>
          <button class="copy-btn" onclick="copyText('check-output', event)">📋 Copier</button>
          <button id="clear-check-output-btn">🧹 Effacer</button>
        </div>
      </div>
      <div class="row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <h4>📎 Requête GET de la vérification ULID :</h4>
          <pre id="req-check" style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
              max-height: 400px;
            ">// En attente</pre>
          <button class="copy-btn" onclick="copyText('req-check', event)">📋 Copier</button>
          <button id="clear-req-check-btn">🧹 Effacer</button>
        </div>
      </div>

      <h2>🧪 Autofill JSON</h2>
      <div class="row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <label for="json-input">Entrée JSON :</label>
            <label style="display: inline-flex; align-items: center; gap: 0.4rem;">
              <input type="checkbox" id="beautify-toggle">
              Beautify
            </label>
          </div>
          <textarea id="json-input" rows="21"
            placeholder=
    '// Exemple de JSON à remplir
    {
      "playlist_uid": null,
      "playlist_name": null,
      "playlist_description": null,
      "playlist_cover": null,{
      "playlist_uid": null,
      "tracks": [
        {
          "track_uid": null
        }
      ]
    }'
            style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
            "></textarea>
          <div id="json-validity" style="margin-top: 0.3rem; font-weight: bold;"></div>
          <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
            <button id="paste-json-btn">📥 Coller</button>
            <button id="clear-json-btn">🧼 Effacer JSON</button>
            <button id="autofill-btn">Compléter les champs *_uid:null</button>
          </div>
        </div>  
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <label for="json-output">Sortie JSON Autofill :</label>
          <pre id="json-output" style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
              max-height: 400px;
            ">// En attente</pre>
          <div style="display: flex; align-items: center; gap: 1rem; margin-top: 0.5rem;">
            <button class="copy-btn" onclick="copyText('json-output', event)">📋 Copier</button>
            <button id="clear-json-output-btn">🧹 Effacer</button>
            <label for="autofill-export-format" style="width: min(35%, 200px);">Exporter en :
              <select id="autofill-export-format">
                <option value="json">JSON</option>
                <option value="text">Text</option>
              </select>
            </label>      
            <button id="download-autofill-btn">💾 Télécharger</button>
          </div>      
        </div>
      </div>
      <div class="row" style="display: flex; flex-wrap: wrap; gap: 1rem;">
        <div class="col" style="flex: 1 1 0; min-width: 300px; max-width: 50%; box-sizing: border-box;">
          <h4>📨 Requête POST Autofill JSON :</h4>
          <pre id="req-autofill-full" style="
              width: 100%;
              max-width: 100%;
              overflow-x: auto;
              overflow-y: auto;
              white-space: pre-wrap;
              word-break: break-word;
              box-sizing: border-box;
              max-height: 400px;
            ">// En attente</pre>
          <button class="copy-btn" onclick="copyText('req-autofill-full', event)">📋 Copier</button>
          <button id="clear-req-autofill-btn">🧹 Effacer</button>
        </div>
      </div>
    </main>
    <footer>
      ULID Playground v1 — Codé à la main par Raphaël dans le noir 🦾
    </footer>
  </div>
  <script>
    document.querySelector('.burger-btn').addEventListener('click', () => {
      document.querySelector('.ulid-nav').classList.toggle('show');
    });
  </script>
  <script type="module" src="/playground.js"></script>
  <script src="/theme-manager.js"></script>
</body>
</html>
